# Matrix ESS Community åŸŸåé…ç½®è¯´æ˜

## ğŸŒ åŸŸåæ¶æ„è®¾è®¡

### æ ‡å‡†å­åŸŸåå‰ç¼€
åŸºäºä¸»åŸŸåè‡ªåŠ¨ç”Ÿæˆæ ‡å‡†åŒ–çš„å­åŸŸåç»“æ„ï¼š

| æœåŠ¡ | å­åŸŸåå‰ç¼€ | å®Œæ•´åŸŸåç¤ºä¾‹ | ç”¨é€” |
|------|------------|--------------|------|
| Element Web | `app` | `app.example.com` | Webå®¢æˆ·ç«¯ç•Œé¢ |
| è®¤è¯æœåŠ¡ | `mas` | `mas.example.com` | Matrix Authentication Service |
| RTCæœåŠ¡ | `rtc` | `rtc.example.com` | è§†é¢‘ä¼šè®®æœåŠ¡ |
| MatrixæœåŠ¡å™¨ | `matrix` | `matrix.example.com` | Synapseä¸»æœåŠ¡å™¨ |
| IPè§£æ | `ip` | `ip.example.com` | å…¬ç½‘IP DDNSè§£æ |

## ğŸ“‹ é…ç½®æµç¨‹

### 1. ä¸»åŸŸåè¾“å…¥
```bash
ä¸»åŸŸå (å¦‚: example.com): your-domain.com
```

### 2. è‡ªåŠ¨ç”Ÿæˆå­åŸŸå
è„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰å¿…éœ€çš„å­åŸŸåï¼š
```bash
åŸºäºä¸»åŸŸå your-domain.com è‡ªåŠ¨ç”Ÿæˆå­åŸŸå:
  Element Web: app.your-domain.com
  è®¤è¯æœåŠ¡ (MAS): mas.your-domain.com
  RTCæœåŠ¡: rtc.your-domain.com
  MatrixæœåŠ¡å™¨: matrix.your-domain.com
  Synapse: matrix.your-domain.com
```

### 3. ç¡®è®¤æˆ–è‡ªå®šä¹‰
- **é»˜è®¤é€‰æ‹©**: ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„æ ‡å‡†åŸŸå
- **è‡ªå®šä¹‰é€‰æ‹©**: æ‰‹åŠ¨è¾“å…¥æ¯ä¸ªæœåŠ¡çš„åŸŸå

## ğŸ”§ DNSé…ç½®è¦æ±‚

### å¿…éœ€çš„DNSè®°å½•
å‡è®¾ä¸»åŸŸåä¸º `example.com`ï¼Œéœ€è¦é…ç½®ä»¥ä¸‹Aè®°å½•ï¼š

```dns
# å…¬ç½‘IPè§£æ (DDNS)
ip.example.com      A    123.456.789.123

# æœåŠ¡åŸŸå
app.example.com     A    123.456.789.123  # Element Web
mas.example.com     A    123.456.789.123  # è®¤è¯æœåŠ¡
rtc.example.com     A    123.456.789.123  # RTCæœåŠ¡
matrix.example.com  A    123.456.789.123  # MatrixæœåŠ¡å™¨
```

### DDNSé…ç½®
- **IPè§£æåŸŸå**: `ip.your-domain.com` å¿…é¡»é…ç½®DDNSè‡ªåŠ¨æ›´æ–°
- **æœåŠ¡åŸŸå**: å¯ä»¥æŒ‡å‘å›ºå®šIPæˆ–ä½¿ç”¨CNAMEæŒ‡å‘IPè§£æåŸŸå

## ğŸ¯ è®¾è®¡ä¼˜åŠ¿

### 1. æ ‡å‡†åŒ–å‘½å
- **app**: ç›´è§‚è¡¨ç¤ºåº”ç”¨å®¢æˆ·ç«¯
- **mas**: Matrix Authentication Serviceçš„æ ‡å‡†ç¼©å†™
- **rtc**: Real-Time Communicationçš„æ ‡å‡†ç¼©å†™
- **matrix**: Matrixåè®®çš„æ ‡å‡†æœåŠ¡å™¨æ ‡è¯†

### 2. æ˜“äºç®¡ç†
- åŸºäºå•ä¸€ä¸»åŸŸåç®¡ç†æ‰€æœ‰å­åŸŸå
- æ ‡å‡†åŒ–å‰ç¼€ä¾¿äºè®°å¿†å’Œé…ç½®
- æ”¯æŒæ‰¹é‡DNSé…ç½®

### 3. æ‰©å±•æ€§å¥½
- é¢„ç•™æ ‡å‡†å‰ç¼€ä¾¿äºæœªæ¥æ‰©å±•
- å…¼å®¹Matrixç”Ÿæ€ç³»ç»Ÿæ ‡å‡†
- æ”¯æŒå¤šç¯å¢ƒéƒ¨ç½²

## ğŸ“– é…ç½®ç¤ºä¾‹

### ç¤ºä¾‹1: ä¸ªäººåŸŸå
```bash
ä¸»åŸŸå: mymatrix.com

ç”Ÿæˆçš„åŸŸå:
- Element Web: app.mymatrix.com
- è®¤è¯æœåŠ¡: mas.mymatrix.com  
- RTCæœåŠ¡: rtc.mymatrix.com
- MatrixæœåŠ¡å™¨: matrix.mymatrix.com
```

### ç¤ºä¾‹2: ä¼ä¸šåŸŸå
```bash
ä¸»åŸŸå: company.com

ç”Ÿæˆçš„åŸŸå:
- Element Web: app.company.com
- è®¤è¯æœåŠ¡: mas.company.com
- RTCæœåŠ¡: rtc.company.com
- MatrixæœåŠ¡å™¨: matrix.company.com
```

### ç¤ºä¾‹3: å­åŸŸåéƒ¨ç½²
```bash
ä¸»åŸŸå: matrix.company.com

ç”Ÿæˆçš„åŸŸå:
- Element Web: app.matrix.company.com
- è®¤è¯æœåŠ¡: mas.matrix.company.com
- RTCæœåŠ¡: rtc.matrix.company.com
- MatrixæœåŠ¡å™¨: matrix.matrix.company.com
```

## ğŸ” éªŒè¯æ–¹æ³•

### DNSè§£ææµ‹è¯•
```bash
# æµ‹è¯•æ‰€æœ‰åŸŸåè§£æ
dig app.your-domain.com @8.8.8.8
dig mas.your-domain.com @8.8.8.8
dig rtc.your-domain.com @8.8.8.8
dig matrix.your-domain.com @8.8.8.8
dig ip.your-domain.com @8.8.8.8
```

### æ‰¹é‡æµ‹è¯•è„šæœ¬
```bash
#!/bin/bash
DOMAIN="your-domain.com"
SUBDOMAINS=("app" "mas" "rtc" "matrix" "ip")

for sub in "${SUBDOMAINS[@]}"; do
    echo "æµ‹è¯• $sub.$DOMAIN:"
    dig +short $sub.$DOMAIN @8.8.8.8
done
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. DNSä¼ æ’­æ—¶é—´
- æ–°å¢DNSè®°å½•å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ä¼ æ’­
- å»ºè®®æå‰é…ç½®DNSè®°å½•

### 2. è¯ä¹¦ç”³è¯·
- æ‰€æœ‰å­åŸŸåéƒ½éœ€è¦SSLè¯ä¹¦
- å»ºè®®ä½¿ç”¨é€šé…ç¬¦è¯ä¹¦ `*.your-domain.com`

### 3. é˜²ç«å¢™é…ç½®
- ç¡®ä¿æ‰€æœ‰å­åŸŸåéƒ½æŒ‡å‘æ­£ç¡®çš„æœåŠ¡å™¨IP
- é…ç½®ç›¸åº”çš„ç«¯å£æ˜ å°„

## ğŸ› ï¸ æ•…éšœæ’é™¤

### åŸŸåè§£æå¤±è´¥
1. æ£€æŸ¥DNSè®°å½•é…ç½®
2. éªŒè¯åŸŸåæœåŠ¡å•†è®¾ç½®
3. æµ‹è¯•DNSä¼ æ’­çŠ¶æ€
4. ç¡®è®¤é˜²ç«å¢™è§„åˆ™

### DDNSæ›´æ–°å¤±è´¥
1. æ£€æŸ¥DDNSæœåŠ¡é…ç½®
2. éªŒè¯APIå¯†é’¥è®¾ç½®
3. æµ‹è¯•ç½‘ç»œè¿é€šæ€§
4. æŸ¥çœ‹DDNSæœåŠ¡æ—¥å¿—

---

**æ›´æ–°æ—¶é—´**: 2025-06-13  
**é€‚ç”¨ç‰ˆæœ¬**: Matrix ESS Community v5.0.0  
**åŸŸåæ ‡å‡†**: app/mas/rtc/matrix æ ‡å‡†å‰ç¼€
